# Repository Guidelines

## Project Structure & Module Organization
The Flutter entry point is `lib/main.dart`, which wires into layered modules under `lib/`. Use `lib/app/` for application bootstrap (routing, theming, dependency wiring), `lib/core/` for cross-cutting services and utilities, `lib/features/` for feature-specific UI and state, and `lib/shared/` for reusable widgets. Localization resources live in `lib/l10n/`. Widget and unit tests belong in `test/`, mirroring the `lib/` structure (e.g., `lib/features/...` → `test/features/...`). Assets are split between `assets/data/` (word lists generated by the Python helper described below) and `assets/fonts/`. Platform runners stay under `android/`, `ios/`, and `windows/`; avoid editing them unless you are touching platform channels.

## Build, Test, and Development Commands
Run `flutter pub get` after modifying `pubspec.yaml`. Use `flutter run -d windows` (or another device id) for local smoke checks. Execute `flutter analyze` to surface Dart analyzer warnings, and `flutter test` for automated checks before every pull request. For production builds, prefer `flutter build apk --release` or the platform-specific build command you need.

## Coding Style & Naming Conventions
This repo adopts `package:flutter_lints`. Keep Dart files formatted with `dart format lib test`. Respect two-space indentation, camelCase for variables/methods, PascalCase for widgets and classes, and SCREAMING_SNAKE_CASE for compile-time constants. Widget files should end with `_widget.dart`; tests should follow the same base name plus `_test.dart`. Keep asset filenames lowercase with underscores (`assets/data/french_words.json`). When adding l10n strings, update ARB files in `lib/l10n/` and regenerate with `flutter gen-l10n`.

## Testing Guidelines
Author tests alongside features. New logic in `lib/features/xyz/` should ship with `test/features/xyz/xyz_test.dart` (or widget variants). Favor pumpWidget-based widget tests for UI and rely on mocks/fakes for services under `lib/core/`. Run `flutter test --coverage` if you need coverage data; aim to keep feature packages at or above their current coverage level. Document any intentionally uncovered paths in the pull request description.

## Commit & Pull Request Guidelines
Existing history uses concise, imperative messages (often Chinese verbs such as “重构...” or “修正...”). Follow that style: lead with a short verb phrase and mention the touched area when helpful (`修复 features/checklist 状态同步`). For pull requests, include a summary, screenshots or screen recordings for UI changes, a test plan (`flutter test`, `flutter run`), and links to the related issue or task. Note any data updates (`assets/data` or `process_word_data.py`) so reviewers can re-run generation scripts as needed.

## Data & Localization Notes
Word-set updates go through `process_word_data.py`; drop NDJSON sources into `assets/data/json/` and run `python process_word_data.py` to rebuild `assets/data/db/` and `assets/data/main.db`. After modifying ARB files, re-run `flutter gen-l10n` and commit both the source ARB and generated Dart output to keep translators and the app in sync.
